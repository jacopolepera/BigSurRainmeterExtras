[Rainmeter]
DragGroup=BigSur
Group=Widget | BigSur
Author=Xyrfo and fediaFedia
OnRefreshAction=[!SetTransparency "#opacity#"][!Delay (#SwitchInterval#*60000)][!ActivateConfig "#CURRENTCONFIG#"]
MouseActionCursor=0
MiddleMouseUpAction=!DeactivateConfig
Update=60000
MouseOverAction=[!ShowMeter e][!Redraw]
MouseLeaveAction=[!HideMeter e][!Redraw]

Blur=#globalblurenable#
BlurRegion=2,(11-#Padding#)*#ScaleDpi#,(10-#Padding#)*#ScaleDpi#,(#height#+#Padding#+#Padding#)*#ScaleDpi#,(#height#+#Padding#+#Padding#)*#ScaleDpi#,(#radius#*#ScaleDpi#)

RightMouseUpAction=[!SkinCustomMenu]

ContextTitle=Balanced
ContextAction=["#skinspath#\BigSur\Extras\Ruler\Align.exe" PowerPlan Balanced 0 "#PROGRAMPATH#"]


ContextTitle2=Power Saver
ContextAction2=["#skinspath#\BigSur\Extras\Ruler\Align.exe" PowerPlan PowerSaver 0 "#PROGRAMPATH#"]




ContextTitle3=----
ContextAction3=[]
ContextTitle4=#Close#
ContextAction4=[!DeactivateConfig]
ContextTitle5=----
ContextAction5=[]
ContextTitle6=#EditSmartStack#
ContextAction6=[!WriteKeyValue Variables PickerEnabled 50 "#currentpath#\UserVariables.inc"][!ActivateConfig "#CURRENTCONFIG#" "Picker.ini"]
ContextTitle7=----
ContextAction7=[]
ContextTitle8=#MoreActions#
ContextAction8=[!SkinMenu]


MouseOverAction=[!ShowMeter e][!Redraw]
MouseLeaveAction=[!HideMeter e][!Redraw]


[Metadata]
Version=1.4.0
Information=BigSur 26 for Rainmeter
License=Creative Commons Attribution-Noncommercial-Share Alike 3.0 License

 
 [Variables] 
Type=Regular
@include=#@#Global.inc
@include1=#@#Languages\#MainLanguage#.inc
@include2=#@#\Structure\#Type#\Type.inc
@include3=#skinspath#\BigSur\Widgets\Battery\UserVariables.inc
@include4=#currentpath#\UserVariables.inc
Name=#Battery#
height=150
heightE=160

[Switch]
Measure=String
IfCondition=#BatteryEnabled# > 254
IfTrueAction=[!ActivateConfig "#CURRENTCONFIG#"]



[scroll]
meter=image
w=(160)*#scaledpi#
h=(160)*#scaledpi#
solidcolor=0,0,0,1
MouseScrollUpAction=[!ActivateConfig #CURRENTCONFIG#]
MouseScrollDownAction=[!ActivateConfig #CURRENTCONFIG#]
DynamicVariables=1


[Style]
StringAlign=CENTER
StringStyle=Normal
FontColor=255,255,255
FontFace=#ThemeFont#
AntiAlias=1


[Battery]
Measure=Plugin
Plugin=PowerPlugin
PowerState=Percent

[BatteryTotal]
Measure=Plugin
Plugin=PowerPlugin
PowerState=Percent
Total=1

[AC]
Measure=Plugin
Plugin=PowerPlugin
PowerState=ACLine

[ColorCalc]
Measure=Calc
Formula=[Battery]

IfCondition=ColorCalc < #BatteryLow#
IfTrueAction=[!SetOption Leaf ImageTint #BatteryLowColor#][!SetOption Power LineColor #BatteryLowColor#][!SetOption PowerE LineColor #BatteryLowColor#,50][!Update]
IfCondition2=(ColorCalc >= #BatteryLow#) && (ColorCalc <= #BatteryWarning#)
IfTrueAction2=[!SetOption Leaf ImageTint #BatteryWarningColor#][!SetOption Power LineColor #BatteryWarningColor#][!SetOption PowerE LineColor #BatteryWarningColor#,50][!Update]
IfCondition3=ColorCalc > #BatteryWarning#
IfTrueAction3=[!SetOption Leaf ImageTint #BatteryColor#][!SetOption Power LineColor #BatteryColor#][!SetOption PowerE LineColor #BatteryColor#,50][!Update]
DynamicVariables=1




[MeasurePowerScheme]
Measure=Registry
RegHKeY=HKEY_LOCAL_MACHINE
RegKeY=SYSTEM\ControlSet001\Control\Power\User\PowerSchemes
RegValue=ActivePowerScheme
Substitute="381b4222-f694-41f0-9685-ff5bb260df2e":"Balanced","8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c":"Performance","a1841308-3541-4fab-bc81-f71556f20b4a":"Leaf"


[Leaf]
Meter=Image
ImageName=#skinspath#\BigSur\Widgets\Battery\[MeasurePowerScheme].png
DynamicVariables=1
X=((#Height#/7.5))*#scaledpi#
Y=((#Height#/1.2))*#scaledpi#
H=((#Height#/6))*#scaledpi#
W=((#Height#/6))*#scaledpi#
ImageTint=47, 209, 2

[MeasurePowerScheme2]
Measure=Registry
RegHKeY=HKEY_LOCAL_MACHINE
RegKeY=SYSTEM\ControlSet001\Control\Power\User\PowerSchemes
RegValue=ActivePowerScheme
Substitute="381b4222-f694-41f0-9685-ff5bb260df2e":"2","8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c":"3","a1841308-3541-4fab-bc81-f71556f20b4a":"1"



[EcoShown]
Measure=Calc
Formula=[MeasurePowerScheme2]

IfCondition=(EcoShown = 2)
IfTrueAction=[!HideMeter BalancedE][!ShowMeter PowerSaverE][!Redraw]

IfCondition2=(EcoShown = 1)
IfTrueAction2=[!HideMeter PowerSaverE][!ShowMeter BalancedE][!Redraw]

DynamicVariables=1


[PowerSaverE]
Meter=Image
X=((#Height#/15))*#scaledpi#
Y=((#Height#/15))*#scaledpi#
H=((#Height#))*#scaledpi#
W=((#Height#))*#scaledpi#
LeftMouseUpAction=!execute ["#skinspath#\BigSur\Extras\Ruler\Align.exe" PowerPlan PowerSaver 0 "#PROGRAMPATH#"]
SolidColor=0,255,0,1
MouseActionCursor=1

[BalancedE]
Meter=Image
X=((#Height#/15))*#scaledpi#
Y=((#Height#/15))*#scaledpi#
H=((#Height#))*#scaledpi#
W=((#Height#))*#scaledpi#
LeftMouseUpAction=!execute ["#skinspath#\BigSur\Extras\Ruler\Align.exe" PowerPlan Balanced 0 "#PROGRAMPATH#"]
SolidColor=0,255,0,1
MouseActionCursor=1

[PowerE]
Meter=ROUNDLINE
MeasureName=

LineWidtH=1
StartAngle=6.40
RotationAngle=6.2831853
LineLengtH=(#Height#/5)*#scaledpi#
LineStart=(#Height#/5-5)*#scaledpi#
DynamicVariables=1
LineColor=47, 209, 2,50
Solid=1
AntiAlias=1
x=(#Height#/3)*#scaledpi#
y=(#Height#/3)*#scaledpi#

[Power]
Meter=ROUNDLINE
MeasureName=Battery

LineWidtH=1
StartAngle=6.40
RotationAngle=6.2831853
LineLengtH=(#Height#/5)*#scaledpi#
LineStart=(#Height#/5-5)*#scaledpi#
DynamicVariables=1
LineColor=47, 209, 2
Solid=1
AntiAlias=1
x=(#Height#/3)*#scaledpi#
y=(#Height#/3)*#scaledpi#


[Name]
Meter=String
MeasureName=Battery
Text=%1%
MeterStyle=Style
Y=((#Height#/1.5))*#scaledpi#
X=((#Height#/10))*#scaledpi#
StringAlign=left
StringStyle=Normal
FontColor=#textcolor2#
FontFace=#ThemeFont#
InlineSetting=#InlineShadow#
FontSize=((#Height#/4.5))*#scaledpi#
AntiAlias=1
InlineSetting=#InlineShadow1#

[imgS]
meter=Image
x=(#Height#/4.17)*#scaledpi#
y=(#Height#/4.17)*#scaledpi#
w=(#Height#/5)*#scaledpi#
w=(#Height#/5)*#scaledpi#
imagename=#skinspath#\BigSur\Widgets\Battery\Icon.png
imagetint=#textcolor2#

[PlugE]
Meter=Image
ImageName=#skinspath#\BigSur\Widgets\Battery\[AC].png
DynamicVariables=1
X=((#Height#/3.7))*#scaledpi#
Y=((#Height#/10.5))*#scaledpi#
H=((#Height#/7))*#scaledpi#
W=((#Height#/7))*#scaledpi#
ImageTint=#colorskin#

[Plug]
Meter=Image
ImageName=#skinspath#\BigSur\Widgets\Battery\[AC].png
DynamicVariables=1
X=3r
Y=3r
H=((#Height#/10))*#scaledpi#
W=((#Height#/10))*#scaledpi#
ImageTint=#textcolor2#


[e]
meter=image
imagename=e.png
w=(170)*#scaledpi#
h=(170)*#scaledpi#
Hidden=1
imagetint=#textcolor2#